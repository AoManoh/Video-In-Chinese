# 文档审查检查表

本文档提供了三层文档的审查检查表，用于确保文档质量和一致性。

---

## 第一层文档审查清单（Base-Design.md）

### 1. 完整性检查

- [ ] 是否包含项目愿景与 MVP 范围？
- [ ] 是否包含系统架构与设计（架构模式、服务划分）？
- [ ] 是否包含技术栈选型（语言、框架、中间件、外部 API）？
- [ ] 是否包含项目工程结构（目录树）？
- [ ] 是否包含核心业务工作流（高层次流程）？
- [ ] 是否包含处理模式说明？
- [ ] 是否包含已知限制与风险？

### 2. 层次分明检查

- [ ] 是否只描述"做什么"，而不描述"怎么做"？
- [ ] 是否没有包含具体代码实现？
- [ ] 是否没有包含详细算法逻辑？
- [ ] 是否没有包含具体错误处理逻辑？
- [ ] 是否没有包含性能优化细节？

### 3. 准确性检查

- [ ] 服务划分是否清晰合理？
- [ ] 技术栈选型是否有充分理由？
- [ ] 核心业务工作流是否完整？
- [ ] 是否有明显的逻辑错误或遗漏？

### 4. 清晰性检查

- [ ] 是否易于理解？
- [ ] 是否有歧义或模糊的表述？
- [ ] 是否有足够的图表辅助说明（如架构图、流程图）？

### 5. 一致性检查

- [ ] 各章节之间是否一致？
- [ ] 是否与架构决策记录（ADR）一致？

---

## 第二层文档审查清单（{服务名}-design.md）

### 1. 完整性检查

- [ ] 是否包含服务定位与核心职责？
- [ ] 是否包含完整的 gRPC/API 接口定义（.proto/.api 文件完整内容）？
- [ ] 是否包含核心数据结构（Redis、数据库）？
- [ ] 是否包含关键逻辑步骤（Key Logic Steps）？
- [ ] 是否包含服务交互时序图？
- [ ] 是否包含错误码清单？
- [ ] 是否包含配置项定义？
- [ ] 是否包含与第一层文档的对应关系？

### 2. 层次分明检查

- [ ] 是否使用"关键逻辑步骤"而非具体代码？
- [ ] 关键逻辑步骤是否采用步骤化描述？
- [ ] 每个步骤是否是一个明确的业务动作？
- [ ] 是否没有包含具体的 Go/Python 代码实现？
- [ ] 是否没有包含详细的错误处理逻辑（try-catch）？
- [ ] 是否没有包含具体的第三方库选择细节？
- [ ] 是否没有包含性能优化细节（如缓存策略）？

### 3. 准确性检查

- [ ] 接口定义是否与第一层文档一致？
- [ ] 数据结构定义是否与第一层文档一致？
- [ ] 服务边界是否与第一层文档一致？
- [ ] 关键逻辑步骤是否完整覆盖核心业务流程？
- [ ] 错误码定义是否合理？
- [ ] 配置项定义是否完整？

### 4. 清晰性检查

- [ ] gRPC/API 接口定义是否有充分的注释？
- [ ] 关键逻辑步骤是否易于理解？
- [ ] 时序图是否清晰展示服务间交互？
- [ ] 是否有歧义或模糊的表述？

### 5. 可执行性检查

- [ ] 关键逻辑步骤是否可以直接转化为第三层代码？
- [ ] 接口定义是否可以直接用于生成代码骨架？
- [ ] 是否有明显的设计缺陷或遗漏？

### 6. 粒度检查

- [ ] 关键逻辑步骤的粒度是否适当（业务动作级别）？
- [ ] 是否避免了过细的实现细节？
- [ ] 是否避免了过粗的高层次描述？
- [ ] 复杂步骤是否标注"在第三层文档解释"？

### 7. 一致性检查

- [ ] 是否与第一层文档（Base-Design.md）一致？
- [ ] 是否与相关的架构决策记录（ADR）一致？
- [ ] 各章节之间是否一致？

---

## 第三层文档审查清单（{服务名}-design-detail.md）

### 1. 完整性检查

- [ ] 是否包含项目结构（关键文件和目录）？
- [ ] 是否包含核心实现决策与上下文？
- [ ] 是否包含依赖库清单（及选型原因）？
- [ ] 是否包含 Dockerfile（及构建说明）？
- [ ] 是否包含测试策略与示例？
- [ ] 是否包含待实现任务清单（TODO List）？

### 2. 层次分明检查

- [ ] 核心实现决策是否专注于"为什么这么写"，而不是"写了什么"？
- [ ] 是否避免了大段的代码复制粘贴？
- [ ] 项目结构是否仅列出关键文件（而非所有文件）？

### 3. 准确性检查

- [ ] 核心实现决策是否与第二层文档的关键逻辑步骤一致？
- [ ] 依赖库清单是否完整？
- [ ] Dockerfile 是否可以成功构建？
- [ ] 测试策略是否合理？

### 4. 清晰性检查

- [ ] 核心实现决策是否易于理解？
- [ ] 算法选择理由是否充分？
- [ ] 库选择理由是否充分？
- [ ] 是否有歧义或模糊的表述？

### 5. 代码片段使用规则检查

- [ ] 代码片段是否仅用于阐明决策（而非复制粘贴）？
- [ ] 代码片段是否严格限制在 20 行以内？
- [ ] 是否优先使用伪代码，其次才是简化示例代码？
- [ ] 代码片段是否只在代码注释和文字都难以清晰表达时才使用？

### 6. 一致性检查

- [ ] 是否与第二层文档（{服务名}-design.md）一致？
- [ ] 是否与第一层文档（Base-Design.md）一致？
- [ ] 是否与相关的架构决策记录（ADR）一致？
- [ ] 各章节之间是否一致？

---

## 使用说明

### 1. 何时使用本检查表

- **第一层文档完成后**：使用第一层文档审查清单进行自查
- **第二层文档完成后**：使用第二层文档审查清单进行自查，并发起评审会议
- **第三层文档完成后**：使用第三层文档审查清单进行自查

### 2. 如何使用本检查表

1. **自查阶段**：文档作者在完成文档后，逐项检查清单，确保所有项目都符合要求
2. **评审阶段**：评审者使用清单进行评审，标记不符合要求的项目
3. **修订阶段**：文档作者根据评审意见修订文档，再次自查

### 3. 评审会议流程（第二层文档）

第二层文档完成后，必须发起评审会议：

**示例**：
```
伙伴，Processor-design.md 初稿已完成，发起评审。

根据 REVIEW-CHECKLIST.md，我已确认：
[x] 与第一层文档（Base-Design.md v1.2）一致
[x] 使用关键逻辑步骤而非具体代码
[x] 包含完整接口定义（.proto 文件）
[x] 包含时序图
[x] 包含错误码清单
[x] 包含配置项定义

请您审查。
```

### 4. 常见问题

**Q: 如果某个检查项不适用怎么办？**

A: 标记为 N/A（不适用），并在评审时说明理由。

**Q: 如果某个检查项未通过怎么办？**

A: 在评审时标记为未通过，并在修订阶段优先处理。

**Q: 是否需要 100% 通过所有检查项？**

A: 第二层文档必须 100% 通过所有适用的检查项才能锁定。第一层和第三层文档可以根据实际情况灵活处理，但必须在评审时达成共识。

---

## 附录：快速检查要点

### 第一层文档（Base-Design.md）

- ✅ 只描述"做什么"
- ❌ 不描述"怎么做"
- ✅ 包含架构图和流程图
- ❌ 不包含具体代码

### 第二层文档（{服务名}-design.md）

- ✅ 完整的 .proto/.api 文件
- ✅ 关键逻辑步骤（步骤化描述）
- ❌ 不包含具体代码实现
- ✅ 包含时序图、错误码、配置项

### 第三层文档（{服务名}-design-detail.md）

- ✅ 解释"为什么这么写"
- ❌ 不是"写了什么"的复述
- ✅ 代码片段 ≤ 20 行，优先伪代码
- ✅ 包含 Dockerfile 和测试策略

---

